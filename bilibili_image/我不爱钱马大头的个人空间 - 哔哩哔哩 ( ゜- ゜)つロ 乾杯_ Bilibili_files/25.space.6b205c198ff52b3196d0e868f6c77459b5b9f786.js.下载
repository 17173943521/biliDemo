(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{540:function(t,e,s){},662:function(t,e,s){"use strict";var i=s(540);s.n(i).a},692:function(t,e,s){"use strict";s.r(e);var i=s(2),a=s.n(i),n=s(13);function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(Object(s),!0).forEach((function(e){a()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var o={name:"settings",data:function(){return{recSettingDict:{fav_video:{alias:"favlist",name:"我的收藏"},bangumi:{alias:"bangumi",name:"追番追剧"},tags:{alias:"subs",name:"订阅标签"},coins_video:{alias:"coin",name:"最近投币的视频"},user_info:{alias:"info",name:"个人资料"},played_game:{alias:"game",name:"最近玩过的游戏"}},isLoaded:!1,tags:[],tag:"",curPrivacy:"",isDragging:!1}},mounted:function(){var t=this;"owner"!==this._bili_space_state&&this.$router.replace({name:"index"}),this.fetchPersonalTags(this._bili_space_mid).then((function(e){t.tags=e[0].tags,t.isLoaded=!0}))},methods:c(c({},Object(n.b)(["fetchPersonalTags","setPersonalTags","setIndexOrder","setPrivacy"])),{},{onStart:function(){this.isDragging=!0},onEnd:function(){this.isDragging=!1},onUpdate:function(t){rec("space_setup_order_click");for(var e=[],s=document.querySelectorAll(".setting-index-module"),i=0;i<s.length;i++)e.push(s[i].attributes["module-id"].value);this.setIndexOrder([].concat(e,[6]).join(","))},addTags:function(){var t=this,e=this.tag;""!==e.trim()?this.tags.indexOf(e)>-1?this.$warn("不能重复添加标签哦"):e.length>0&&this.setPersonalTags({tags:this.tags.join(",")+","+e}).then((function(){t.tags.push(e),t.resetTag()})):this.resetTag()},delTags:function(t){var e=this,s=JSON.parse(JSON.stringify(this.tags));s.splice(t,1),this.setPersonalTags({tags:s.join(",")}).then((function(){e.tags.splice(t,1),e.resetTag()}))},resetTag:function(){this.tag=""},switcherToggle:function(t){var e=t.val,s=t.name,i={};i[s]=+e,rec("space_setup_".concat(this.recSettingDict[s].alias,"_").concat(e?"open":"hide","_click")),this.setPrivacy(i)}}),computed:c(c({},Object(n.c)(["_bili_login_info","_bili_space_state","_bili_space_settings","_bili_space_mid"])),{},{tagsCount:function(){return this.tags&&this.tags.length}}),asyncData:function(t,e){var s=t.dispatch,i=e.cookie,a=e.mid;return Promise.all([s("fetchInfo",{mid:a,cookie:i}),s("fetchSettings",{mid:a,cookie:i})])}},l=(s(662),s(4)),d=Object(l.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"wrapper clearfix",attrs:{id:"page-setting"}},[s("div",{staticClass:"col-full"},[s("div",{staticClass:"section",attrs:{id:"setting-privacy"}},[s("h3",{staticClass:"section-title"},[t._v("隐私设置")]),s("div",{staticClass:"setting-privacy"},t._l(t.recSettingDict,(function(e,i){return s("div",{staticClass:"setting-privacy-item",attrs:{name:i}},[s("span",{staticClass:"setting-privacy-name"},[t._v(t._s(e.name))]),s("be-switch",{staticClass:"setting-privacy-switcher",attrs:{"on-label":"公开","off-label":"隐藏",name:i,value:1===t._bili_space_settings.privacy[i]},on:{change:t.switcherToggle}})],1)})),0)]),s("div",{staticClass:"section",attrs:{id:"setting-index-order"}},[s("h3",{staticClass:"section-title"},[t._v("排序设置")]),s("div",{staticClass:"content clearfix",class:{"is-dragging":t.isDragging},attrs:{id:"setting-index-modules"}},[s("ol",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:t.onUpdate,onStart:t.onStart,onEnd:t.onEnd},expression:"{ onUpdate: onUpdate, onStart: onStart, onEnd: onEnd }"}],staticClass:"setting-index-container"},t._l(t._bili_space_settings.index_order_01,(function(e){return s("li",{directives:[{name:"show",rawName:"v-show",value:6!=+e.id,expression:"+o1.id !== 6"}],key:e.id,staticClass:"setting-index-module",attrs:{"module-id":e.id}},[s("span",{staticClass:"setting-index-module-icon icon",attrs:{title:"拖动以排序"}}),t._v(t._s(e.name)+"\n            ")])})),0),s("ol",{directives:[{name:"sortable",rawName:"v-sortable",value:{onUpdate:t.onUpdate,onStart:t.onStart,onEnd:t.onEnd},expression:"{ onUpdate: onUpdate, onStart: onStart, onEnd: onEnd }"}],staticClass:"setting-index-container"},t._l(t._bili_space_settings.index_order_02,(function(e){return s("li",{key:e.id,staticClass:"setting-index-module",attrs:{"module-id":e.id}},[s("span",{staticClass:"setting-index-module-icon icon",attrs:{title:"拖动以排序"}}),t._v(t._s(e.name)+"\n            ")])})),0)])]),s("div",{staticClass:"section",attrs:{id:"setting-tags"}},[t._m(0),s("div",{staticClass:"setting-tags content"},[s("div",{staticClass:"setting-tag-list"},t._l(t.tags,(function(e,i){return s("a",[t._v(t._s(t._f("decodeHTML")(e))+"\n            "),s("span",{directives:[{name:"rep",rawName:"v-rep",value:"space_setup_tag_delete_click",expression:"'space_setup_tag_delete_click'"}],staticClass:"icon delete",on:{click:function(e){return t.delTags(i)}}})])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.tagsCount<5,expression:"tagsCount < 5"}],staticClass:"setting-add-tag"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],staticClass:"length-check space_input",attrs:{type:"text",id:"setting-new-tag",maxlength:"10"},domProps:{value:t.tag},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTags(e)},input:function(e){e.target.composing||(t.tag=e.target.value)}}}),s("span",{directives:[{name:"rep",rawName:"v-rep",value:"space_setup_tag_add_click",expression:"'space_setup_tag_add_click'"}],attrs:{id:"setting-new-tag-btn"},on:{click:t.addTags}},[t._v("新增")])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"section-title"},[this._v("我的个人标签\n        "),e("span",{staticClass:"setting-tags-count"})])}],!1,null,null,null);e.default=d.exports}}]);
//# sourceMappingURL=25.space.6b205c198ff52b3196d0e868f6c77459b5b9f786.js.map